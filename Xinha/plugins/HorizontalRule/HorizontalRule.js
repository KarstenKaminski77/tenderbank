/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
HorizontalRule._pluginInfo={name:"HorizontalRule",version:"1.0",developer:"Nelson Bright",developer_url:"http://www.brightworkweb.com/",c_owner:"Nelson Bright",sponsor:"BrightWork, Inc.",sponsor_url:"http://www.brightworkweb.com/",license:"htmlArea"};function HorizontalRule(g){this.editor=g;var e=g.config;var f=e.toolbar;var h=this;e.registerButton({id:"edithorizontalrule",tooltip:this._lc("Insert/edit horizontal rule"),image:[_editor_url+"images/ed_buttons_main.gif",6,0],textMode:false,action:function(a){h.buttonPress(a)}});e.addToolbarElement("edithorizontalrule","inserthorizontalrule",0)}HorizontalRule.prototype._lc=function(b){return Xinha._lc(b,"HorizontalRule")};HorizontalRule.prototype.buttonPress=function(b){this.editor=b;this._editHorizontalRule()};HorizontalRule.prototype._editHorizontalRule=function(i){editor=this.editor;var j=editor._getSelection();var f=editor._createRange(j);var h=null;if(typeof i=="undefined"){i=editor.getParentElement();if(i&&!/^hr$/i.test(i.tagName)){i=null}}if(i){var g=i.style.width||i.width;h={f_size:parseInt(i.style.height,10)||i.size,f_widthUnit:(/(%|px)$/.test(g))?RegExp.$1:"px",f_width:parseInt(g,10),f_color:Xinha._colorToRgb(i.style.backgroundColor)||i.color,f_align:i.style.textAlign||i.align,f_noshade:(parseInt(i.style.borderWidth,10)==0)||i.noShade}}editor._popupDialog("plugin://HorizontalRule/edit_horizontal_rule.html",function(a){if(!a){return false}var d=i;if(!d){var e=editor._doc.createElement("hr");for(var b in a){var c=a[b];if(c==""){continue}switch(b){case"f_width":if(a.f_widthUnit=="%"){e.style.width=c+"%"}else{e.style.width=c+"px"}break;case"f_size":e.style.height=c+"px";break;case"f_align":e.style.textAlign=c;switch(c){case"left":e.style.marginLeft="0";break;case"right":e.style.marginRight="0";break;case"center":e.style.marginLeft="auto";e.style.marginRight="auto";break}break;case"f_color":e.style.backgroundColor=c;break;case"f_noshade":e.style.border="0";break}}if(Xinha.is_gecko){editor.execCommand("inserthtml",false,Xinha.getOuterHTML(e))}else{editor.insertNodeAtSelection(e)}}else{for(var b in a){var c=a[b];switch(b){case"f_width":if(a.f_widthUnit=="%"){d.style.width=c+"%"}else{d.style.width=c+"px"}break;case"f_size":d.style.height=c+"px";break;case"f_align":d.style.textAlign=c;switch(c){case"left":d.style.marginLeft="0";d.style.marginRight=null;break;case"right":d.style.marginRight="0";d.style.marginLeft=null;break;case"center":d.style.marginLeft="auto";d.style.marginRight="auto";break}break;case"f_color":d.style.backgroundColor=c;break;case"f_noshade":break}d.style.border=(a.f_noshade)?"0":null}}},h)};