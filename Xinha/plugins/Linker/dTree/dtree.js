/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function Node(o,m,q,r,j,p,k,l,n){this.id=o;this.pid=m;this.name=q;this.url=r;this.title=j;this.target=p;this.icon=k;this.iconOpen=l;this._io=n||false;this._is=false;this._ls=false;this._hc=false;this._ai=0;this._p}function dTree(d,c){this.config={target:null,folderLinks:true,useSelection:true,useCookies:true,useLines:true,useIcons:true,useStatusText:false,closeSameLevel:false,inOrder:false};this.icon={root:c+"img/base.gif",folder:c+"img/folder.gif",folderOpen:c+"img/folderopen.gif",node:c+"img/page.gif",empty:c+"img/empty.gif",line:c+"img/line.gif",join:c+"img/join.gif",joinBottom:c+"img/joinbottom.gif",plus:c+"img/plus.gif",plusBottom:c+"img/plusbottom.gif",minus:c+"img/minus.gif",minusBottom:c+"img/minusbottom.gif",nlPlus:c+"img/nolines_plus.gif",nlMinus:c+"img/nolines_minus.gif"};this.obj=d;this.aNodes=[];this.aIndent=[];this.root=new Node(-1);this.selectedNode=null;this.selectedFound=false;this.completed=false}dTree.prototype.add=function(o,m,q,r,j,p,k,l,n){this.aNodes[this.aNodes.length]=new Node(o,m,q,r,j,p,k,l,n)};dTree.prototype.openAll=function(){this.oAll(true)};dTree.prototype.closeAll=function(){this.oAll(false)};dTree.prototype.toString=function(){this.setCS_All();var b='<div class="dtree">\n';if(document.getElementById){if(this.config.useCookies){this.selectedNode=this.getSelected()}b+=this.addNode(this.root)}else{b+="Browser not supported."}b+="</div>";if(!this.selectedFound){this.selectedNode=null}this.completed=true;return b};dTree.prototype.addNode=function(h){var g="";var e=0;if(this.config.inOrder){e=h._ai}for(e;e<this.aNodes.length;e++){if(this.aNodes[e].pid==h.id){var f=this.aNodes[e];f._p=h;f._ai=e;if(!f.target&&this.config.target){f.target=this.config.target}if(f._hc&&!f._io&&this.config.useCookies){f._io=this.isOpen(f.id)}if(!this.config.folderLinks&&f._hc){f.url=null}if(this.config.useSelection&&f.id==this.selectedNode&&!this.selectedFound){f._is=true;this.selectedNode=e;this.selectedFound=true}g+=this.node(f,e);if(f._ls){break}}}return g};dTree.prototype.node=function(d,e){var f='<div class="dTreeNode">'+this.indent(d,e);if(this.config.useIcons){if(!d.icon){d.icon=(this.root.id==d.pid)?this.icon.root:((d._hc)?this.icon.folder:this.icon.node)}if(!d.iconOpen){d.iconOpen=(d._hc)?this.icon.folderOpen:this.icon.node}if(this.root.id==d.pid){d.icon=this.icon.root;d.iconOpen=this.icon.root}f+='<img id="i'+this.obj+e+'" src="'+((d._io)?d.iconOpen:d.icon)+'" alt="" />'}if(d.url){f+='<a id="s'+this.obj+e+'" class="'+((this.config.useSelection)?((d._is?"nodeSel":"node")):"node")+'" href="'+d.url+'"';if(d.title){f+=' title="'+d.title+'"'}if(d.target){f+=' target="'+d.target+'"'}if(this.config.useStatusText){f+=" onmouseover=\"window.status='"+d.name+"';return true;\" onmouseout=\"window.status='';return true;\" "}if(this.config.useSelection&&((d._hc&&this.config.folderLinks)||!d._hc)){f+=' onclick="javascript: '+this.obj+".s("+e+');"'}f+=">"}else{if((!this.config.folderLinks||!d.url)&&d._hc&&d.pid!=this.root.id){f+='<a href="javascript: '+this.obj+".o("+e+');" class="node">'}}f+=d.name;if(d.url||((!this.config.folderLinks||!d.url)&&d._hc)){f+="</a>"}f+="</div>";if(d._hc){f+='<div id="d'+this.obj+e+'" class="clip" style="display:'+((this.root.id==d.pid||d._io)?"block":"none")+';">';f+=this.addNode(d);f+="</div>"}this.aIndent.pop();return f};dTree.prototype.indent=function(h,f){var g="";if(this.root.id!=h.pid){for(var e=0;e<this.aIndent.length;e++){g+='<img src="'+((this.aIndent[e]==1&&this.config.useLines)?this.icon.line:this.icon.empty)+'" alt="" />'}(h._ls)?this.aIndent.push(0):this.aIndent.push(1);if(h._hc){g+='<a href="javascript: '+this.obj+".o("+f+');"><img id="j'+this.obj+f+'" src="';if(!this.config.useLines){g+=(h._io)?this.icon.nlMinus:this.icon.nlPlus}else{g+=((h._io)?((h._ls&&this.config.useLines)?this.icon.minusBottom:this.icon.minus):((h._ls&&this.config.useLines)?this.icon.plusBottom:this.icon.plus))}g+='" alt="" /></a>'}else{g+='<img src="'+((this.config.useLines)?((h._ls)?this.icon.joinBottom:this.icon.join):this.icon.empty)+'" alt="" />'}}return g};dTree.prototype.setCS=function(d){var f;for(var e=0;e<this.aNodes.length;e++){if(this.aNodes[e].pid==d.id){d._hc=true}if(this.aNodes[e].pid==d.pid){f=this.aNodes[e].id}}if(f==d.id){d._ls=true}};dTree.prototype.setCS_All=function(){var d={};for(var e=0;e<this.aNodes.length;e++){var f=this.aNodes[e];if(!d[f.pid]){d[f.pid]={_hc:true,_ls_is:f.id}}else{d[f.pid]._hc=true;d[f.pid]._ls_is=f.id}if(!d[f.id]){d[f.id]={_hc:false,_ls_is:null}}}for(var e=0;e<this.aNodes.length;e++){var f=this.aNodes[e];f._ls=d[f.pid]._ls_is==f.id?true:false;if(d[f.id]){f._hc=d[f.id]._hc}}};dTree.prototype.getSelected=function(){var b=this.getCookie("cs"+this.obj);return(b)?b:null};dTree.prototype.s=function(c){if(!this.config.useSelection){return}var d=this.aNodes[c];if(d._hc&&!this.config.folderLinks){return}if(this.selectedNode!=c){if(this.selectedNode||this.selectedNode==0){eOld=document.getElementById("s"+this.obj+this.selectedNode);eOld.className="node"}eNew=document.getElementById("s"+this.obj+c);eNew.className="nodeSel";this.selectedNode=c;if(this.config.useCookies){this.setCookie("cs"+this.obj,d.id)}}};dTree.prototype.o=function(c){var d=this.aNodes[c];this.nodeStatus(!d._io,c,d._ls);d._io=!d._io;if(this.config.closeSameLevel){this.closeLevel(d)}if(this.config.useCookies){this.updateCookie()}};dTree.prototype.oAll=function(d){for(var c=0;c<this.aNodes.length;c++){if(this.aNodes[c]._hc&&this.aNodes[c].pid!=this.root.id){this.nodeStatus(d,c,this.aNodes[c]._ls);this.aNodes[c]._io=d}}if(this.config.useCookies){this.updateCookie()}};dTree.prototype.openTo=function(h,g,i){if(!i){for(var j=0;j<this.aNodes.length;j++){if(this.aNodes[j].id==h){h=j;break}}}var f=this.aNodes[h];if(f.pid==this.root.id||!f._p){return}f._io=true;f._is=g;if(this.completed&&f._hc){this.nodeStatus(true,f._ai,f._ls)}if(this.completed&&g){this.s(f._ai)}else{if(g){this._sn=f._ai}}this.openTo(f._p._ai,false,true)};dTree.prototype.closeLevel=function(d){for(var c=0;c<this.aNodes.length;c++){if(this.aNodes[c].pid==d.pid&&this.aNodes[c].id!=d.id&&this.aNodes[c]._hc){this.nodeStatus(false,c,this.aNodes[c]._ls);this.aNodes[c]._io=false;this.closeAllChildren(this.aNodes[c])}}};dTree.prototype.closeAllChildren=function(d){for(var c=0;c<this.aNodes.length;c++){if(this.aNodes[c].pid==d.id&&this.aNodes[c]._hc){if(this.aNodes[c]._io){this.nodeStatus(false,c,this.aNodes[c]._ls)}this.aNodes[c]._io=false;this.closeAllChildren(this.aNodes[c])}}};dTree.prototype.nodeStatus=function(f,e,d){eDiv=document.getElementById("d"+this.obj+e);eJoin=document.getElementById("j"+this.obj+e);if(this.config.useIcons){eIcon=document.getElementById("i"+this.obj+e);eIcon.src=(f)?this.aNodes[e].iconOpen:this.aNodes[e].icon}eJoin.src=(this.config.useLines)?((f)?((d)?this.icon.minusBottom:this.icon.minus):((d)?this.icon.plusBottom:this.icon.plus)):((f)?this.icon.nlMinus:this.icon.nlPlus);eDiv.style.display=(f)?"block":"none"};dTree.prototype.clearCookie=function(){var c=new Date();var d=new Date(c.getTime()-1000*60*60*24);this.setCookie("co"+this.obj,"cookieValue",d);this.setCookie("cs"+this.obj,"cookieValue",d)};dTree.prototype.setCookie=function(g,l,i,h,j,k){document.cookie=escape(g)+"="+escape(l)+(i?"; expires="+i.toGMTString():"")+(h?"; path="+h:"")+(j?"; domain="+j:"")+(k?"; secure":"")};dTree.prototype.getCookie=function(f){var j="";var i=document.cookie.indexOf(escape(f)+"=");if(i!=-1){var g=i+(escape(f)+"=").length;var h=document.cookie.indexOf(";",g);if(h!=-1){j=unescape(document.cookie.substring(g,h))}else{j=unescape(document.cookie.substring(g))}}return(j)};dTree.prototype.updateCookie=function(){var d="";for(var c=0;c<this.aNodes.length;c++){if(this.aNodes[c]._io&&this.aNodes[c].pid!=this.root.id){if(d){d+="."}d+=this.aNodes[c].id}}this.setCookie("co"+this.obj,d)};dTree.prototype.isOpen=function(e){var f=this.getCookie("co"+this.obj).split(".");for(var d=0;d<f.length;d++){if(f[d]==e){return true}}return false};if(!Array.prototype.push){Array.prototype.push=function array_push(){for(var b=0;b<arguments.length;b++){this[this.length]=arguments[b]}return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function array_pop(){lastElement=this[this.length-1];this.length=Math.max(this.length-1,0);return lastElement}};