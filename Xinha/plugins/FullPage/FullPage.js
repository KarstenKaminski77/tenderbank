/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function FullPage(e){this.editor=e;var d=e.config;d.fullPage=true;var f=this;d.registerButton("FP-docprop",this._lc("Document properties"),e.imgURL("docprop.gif","FullPage"),false,function(b,a){f.buttonPress(b,a)});d.addToolbarElement(["separator","FP-docprop"],"separator",-1)}FullPage._pluginInfo={name:"FullPage",version:"1.0",developer:"Mihai Bazon",developer_url:"http://dynarch.com/mishoo/",c_owner:"Mihai Bazon",sponsor:"Thycotic Software Ltd.",sponsor_url:"http://thycotic.com",license:"htmlArea"};FullPage.prototype._lc=function(b){return Xinha._lc(b,"FullPage")};FullPage.prototype.buttonPress=function(t,v){var C=this;switch(v){case"FP-docprop":var A=t._doc;var x=A.getElementsByTagName("link");var y="";var i="";var F="";var z="";var s="";for(var G=x.length;--G>=0;){var D=x[G];if(/stylesheet/i.test(D.rel)){if(/alternate/i.test(D.rel)){i=D.href}else{y=D.href}}}var E=A.getElementsByTagName("meta");for(var G=E.length;--G>=0;){var u=E[G];if(/content-type/i.test(u.httpEquiv)){r=/^text\/html; *charset=(.*)$/i.exec(u.content);s=r[1]}else{if((/keywords/i.test(u.name))||(/keywords/i.test(u.id))){F=u.content}else{if((/description/i.test(u.name))||(/description/i.test(u.id))){z=u.content}}}}var B=A.getElementsByTagName("title")[0];B=B?B.innerHTML:"";var w={f_doctype:t.doctype,f_title:B,f_body_bgcolor:Xinha._colorToRgb(A.body.style.backgroundColor),f_body_fgcolor:Xinha._colorToRgb(A.body.style.color),f_base_style:y,f_alt_style:i,f_charset:s,f_keywords:F,f_description:z,editor:t};t._popupDialog("plugin://FullPage/docprop",function(a){C.setDocProp(a)},w);break}};FullPage.prototype.setDocProp=function(x){var z="";var i=this.editor._doc;var H=i.getElementsByTagName("head")[0];var L=i.getElementsByTagName("link");var M=i.getElementsByTagName("meta");var w=null;var K=null;var J=null;var D=null;var B=null;var I=null;for(var v=L.length;--v>=0;){var F=L[v];if(/stylesheet/i.test(F.rel)){if(/alternate/i.test(F.rel)){K=F}else{w=F}}}for(var v=M.length;--v>=0;){var A=M[v];if(/content-type/i.test(A.httpEquiv)){r=/^text\/html; *charset=(.*)$/i.exec(A.content);J=r[1];D=A}else{if((/keywords/i.test(A.name))||(/keywords/i.test(A.id))){B=A}else{if((/description/i.test(A.name))||(/description/i.test(A.id))){I=A}}}}function y(a){var b=i.createElement("link");b.rel=a?"alternate stylesheet":"stylesheet";H.appendChild(b);return b}function G(b,a,d){var c=i.createElement("meta");if(b!=""){c.httpEquiv=b}if(a!=""){c.name=a}if(a!=""){c.id=a}c.content=d;H.appendChild(c);return c}if(!w&&x.f_base_style){w=y(false)}if(x.f_base_style){w.href=x.f_base_style}else{if(w){H.removeChild(w)}}if(!K&&x.f_alt_style){K=y(true)}if(x.f_alt_style){K.href=x.f_alt_style}else{if(K){H.removeChild(K)}}if(D){H.removeChild(D);D=null}if(!D&&x.f_charset){D=G("Content-Type","","text/html; charset="+x.f_charset)}if(!B&&x.f_keywords){B=G("","keywords",x.f_keywords)}else{if(x.f_keywords){B.content=x.f_keywords}else{if(B){H.removeChild(B)}}}if(!I&&x.f_description){I=G("","description",x.f_description)}else{if(x.f_description){I.content=x.f_description}else{if(I){H.removeChild(I)}}}for(var v in x){var C=x[v];switch(v){case"f_title":var E=i.getElementsByTagName("title")[0];if(!E){E=i.createElement("title");H.appendChild(E)}else{while(node=E.lastChild){E.removeChild(node)}}if(!Xinha.is_ie){E.appendChild(i.createTextNode(C))}else{i.title=C}break;case"f_doctype":this.editor.setDoctype(C);break;case"f_body_bgcolor":i.body.style.backgroundColor=C;break;case"f_body_fgcolor":i.body.style.color=C;break}}};