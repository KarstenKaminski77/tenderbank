/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function ImagePicker(f){this.field=f;var d=this;var e=document.createElement("input");e.type="button";e.value="Browse";e.onclick=function(){d.popup_picker()};f.parentNode.insertBefore(e,f.nextSibling);f.size="20";f.style.textAlign="right"}ImagePicker.prototype.backend=Xinha.getPluginDir("ImageManager")+"/backend.php?__plugin=ImageManager&";ImagePicker.prototype.backend_data=null;ImagePicker.prototype.append_query_string=true;ImagePicker.prototype.popup_picker=function(){var h=this;var g=null;if(h.field.value){g={f_url:h.field.value,f_width:null,f_height:null,f_alt:h.field.value,f_border:null,f_align:null,f_padding:null,f_margin:null,f_backgroundColor:null,f_borderColor:null,f_border:null,f_padding:null,f_margin:null};while(g.f_url.match(/[?&]((f_[a-z0-9]+)=([^&#]+))/i)){g[RegExp.$2]=decodeURIComponent(RegExp.$3);g.f_url=g.f_url.replace(RegExp.$1,"")}g.f_url=g.f_url.replace(/&{2,}/g,"&");g.f_url=g.f_url.replace(/\?&*(#.*)?$/,"")}var e=this.backend+"__function=manager";if(this.backend_config!=null){e+="&backend_config="+encodeURIComponent(this.backend_config);e+="&backend_config_hash="+encodeURIComponent(this.backend_config_hash);e+="&backend_config_secret_key_location="+encodeURIComponent(this.backend_config_secret_key_location)}if(this.backend_data!=null){for(var f in this.backend_data){e+="&"+f+"="+encodeURIComponent(this.backend_data[f])}}Dialog(e,function(a){if(!a){return false}h.field.value=a.f_url;if(h.append_query_string){if(h.field.value.match(/[?&](.*)$/)){if(RegExp.$1.length){h.field.value+="&"}}else{h.field.value+="?"}for(var b in a){if(b=="f_url"||a[b]==null||a[b]=="null"||a[b]==""){continue}if(typeof a[b]=="function"){continue}if(a[b].length=0){continue}h.field.value+=b+"="+encodeURIComponent(a[b])+"&"}}},g)};if(typeof Dialog=="undefined"){function Dialog(e,f,g){if(typeof g=="undefined"){g=window}var h=window.open(e,"hadialog","toolbar=no,menubar=no,personalbar=no,width=10,height=10,scrollbars=yes,resizable=yes,modal=yes,dependable=yes");Dialog._modal=h;Dialog._arguments=g;Dialog._return=function(a){if(a&&f){f(a)}Dialog._modal=null};Dialog._modal.focus()}Dialog._return=null;Dialog._modal=null;Dialog._arguments=null}ImagePicker.prototype.backend_config=null;ImagePicker.prototype.backend_config_hash=null;ImagePicker.prototype.backend_config_secret_key_location="Xinha:ImageManager";