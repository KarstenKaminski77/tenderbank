/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function PasteText(f){this.editor=f;var e=f.config;var d=this;e.registerButton({id:"pastetext",tooltip:this._lc("Paste as Plain Text"),image:f.imgURL("ed_paste_text.gif","PasteText"),textMode:false,action:function(){d.show()}});e.addToolbarElement("pastetext",["paste","killword"],1)}PasteText._pluginInfo={name:"PasteText",version:"1.2",developer:"Michael Harris",developer_url:"http://www.jonesadvisorygroup.com",c_owner:"Jones Advisory Group",sponsor:"Jones International University",sponsor_url:"http://www.jonesinternational.edu",license:"htmlArea"};PasteText.prototype._lc=function(b){return Xinha._lc(b,"PasteText")};Xinha.Config.prototype.PasteText={showParagraphOption:true,newParagraphDefault:true};PasteText.prototype.onGenerateOnce=function(){var b=PasteText;if(b.loading){return}b.loading=true;Xinha._getback(Xinha.getPluginDir("PasteText")+"/popups/paste_text.html",function(a){b.html=a})};PasteText.prototype._prepareDialog=function(){var c=this;var d=this.editor;var c=this;this.dialog=new Xinha.Dialog(d,PasteText.html,"PasteText",{width:350});this.dialog.getElementById("ok").onclick=function(){c.apply()};this.dialog.getElementById("cancel").onclick=function(){c.dialog.hide()};if(d.config.PasteText.showParagraphOption){this.dialog.getElementById("paragraphOption").style.display=""}if(d.config.PasteText.newParagraphDefault){this.dialog.getElementById("insertParagraphs").checked=true}this.dialog.onresize=function(){this.getElementById("inputArea").style.height=parseInt(this.height,10)-this.getElementById("h1").offsetHeight-this.getElementById("buttons").offsetHeight-parseInt(this.rootElem.style.paddingBottom,10)+"px";this.getElementById("inputArea").style.width=(this.width-2)+"px"}};PasteText.prototype.show=function(){if(!this.dialog){this._prepareDialog()}var b={inputArea:""};this.dialog.show(b);this.dialog.onresize();this.dialog.getElementById("inputArea").focus()};PasteText.prototype.apply=function(){var e=this.dialog.hide();var d=e.inputArea;var f=e.insertParagraphs;d=d.replace(/</g,"&lt;");d=d.replace(/>/g,"&gt;");if(e.insertParagraphs){d=d.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");d=d.replace(/\n/g,"</p><p>");d="<p>"+d+"</p>";if(Xinha.is_ie){this.editor.insertHTML(d)}else{this.editor.execCommand("inserthtml",false,d)}}else{d=d.replace(/\n/g,"<br />");this.editor.insertHTML(d)}};