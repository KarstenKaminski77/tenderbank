/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
MootoolsFileManager._pluginInfo={name:"Mootols File Manager",version:"1.0",developer:"James Sleeman (Xinha), Christoph Pojer (FileManager)",license:"MIT"};Xinha.Config.prototype.MootoolsFileManager={backend:Xinha.getPluginDir("MootoolsFileManager")+"/backend.php?__plugin=MootoolsFileManager&",backend_data:{}};MootoolsFileManager.AssetLoader=Xinha.includeAssets();if(typeof MooTools=="undefined"){MootoolsFileManager.AssetLoader.loadScript("mootools-filemanager/Demos/mootools-core.js","MootoolsFileManager").loadScript("mootools-filemanager/Demos/mootools-more.js","MootoolsFileManager")}if(typeof FileManager=="undefined"){MootoolsFileManager.AssetLoader.loadStyle("mootools-filemanager/Css/FileManager.css","MootoolsFileManager").loadStyle("mootools-filemanager/Css/Additions.css","MootoolsFileManager").loadScript("mootools-filemanager/Source/FileManager.js","MootoolsFileManager").loadScript("mootools-filemanager/Language/Language.en.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Additions.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader/Fx.ProgressBar.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader/Swiff.Uploader.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader.js","MootoolsFileManager")}MootoolsFileManager.AssetLoader.loadStyle("MootoolsFileManager.css","MootoolsFileManager");function MootoolsFileManager(editor){this.editor=editor;var self=this;var cfg=editor.config;Xinha._postback(editor.config.MootoolsFileManager.backend+"__function=read-config",editor.config.MootoolsFileManager.backend_data,function(phpcfg){eval("var f = "+phpcfg+";");self.phpcfg=f;self.hookUpButtons()});return}MootoolsFileManager.prototype.hookUpButtons=function(){var d=this;var c=d.phpcfg;if(c.files_dir){MootoolsFileManager.AssetLoader.loadScriptOnce("MootoolsFileManager.FileManager.js","MootoolsFileManager");this.editor.config.registerButton({id:"linkfile",tooltip:Xinha._lc("Insert File Link","ExtendedFileManager"),image:Xinha.getPluginDir("ExtendedFileManager")+"/img/ed_linkfile.gif",textMode:false,action:function(a){MootoolsFileManager.AssetLoader.whenReady(function(){d.OpenFileManager()})}});this.editor.config.addToolbarElement("linkfile","createlink",1)}if(c.images_dir){MootoolsFileManager.AssetLoader.loadScriptOnce("MootoolsFileManager.ImageManager.js","MootoolsFileManager");d.editor._insertImage=function(){MootoolsFileManager.AssetLoader.whenReady(function(){d.OpenImageManager()})}}};MootoolsFileManager.prototype.ScaleImage=function(k,m,n){if(!k.height||!k.width){return m}if(!m.height&&!m.width){return k}if(!n){if(k.width>k.height){n="height"}else{n="width"}}var o=null;switch(n){case"height":o="width";break;case"width":o="height";break}if(!m[o]){var l=o;o=n;n=l}var j=0;switch(n){case"width":j=k.width/k.height;break;case"height":j=k.height/k.width;break}var i={};i[o]=m[o];i[n]=Math.floor(m[o]*j);if(isNaN(i[o])){i[o]=null}if(isNaN(i[n])){i[n]=null}return i};MootoolsFileManager.prototype.shortSize=function(i){if(/ /.test(i)){var e=i.split(" ");var g=true;for(var h=1;h<e.length;h++){if(e[0]!=e[h]){g=false;break}}if(g){i=e[0]}}return i};MootoolsFileManager.prototype.convertToHex=function(h){if(typeof h=="string"&&/, /.test.color){h=h.replace(/, /,",")}if(typeof h=="string"&&/ /.test.color){var e=h.split(" ");var i="";for(var g=0;g<e.length;g++){i+=Xinha._colorToRgb(e[g]);if(g+1<e.length){i+=" "}}return i}return Xinha._colorToRgb(h)};