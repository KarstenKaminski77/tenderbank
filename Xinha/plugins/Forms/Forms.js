/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function Forms(l){this.editor=l;var n=l.config;var p=Forms.btnList;var m=this;var o=["linebreak"];for(var j=0;j<p.length;++j){var k=p[j];if(!k){o.push("separator")}else{var i=k[0];if(j<3){n.registerButton(i,this._lc(k[1]),l.imgURL("ed_"+k[0]+".gif","Forms"),false,function(b,a){m.buttonPress(b,a)})}else{n.registerButton(i,this._lc(k[1]),l.imgURL("ed_"+k[0]+".gif","Forms"),false,function(b,a){m.buttonPress(b,a)},"form")}o.push(i)}}n.toolbar.push(o)}Forms._pluginInfo={name:"Forms",origin:"version: 1.0, by Nelson Bright, BrightWork, Inc., http://www.brightworkweb.com",version:"2.0",developer:"Udo Schmal",developer_url:"",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath-NeueMedien",license:"htmlArea"};Forms.btnList=[null,["form","Form"],null,["textarea","Textarea"],["select","Selection Field"],["checkbox","Checkbox"],["radio","Radio Button"],["text","Text Field"],["password","Password Field"],["file","File Field"],["button","Button"],["submit","Submit Button"],["reset","Reset Button"],["image","Image Button"],["hidden","Hidden Field"],["label","Label"],["fieldset","Field Set"]];Forms.prototype._lc=function(b){return Xinha._lc(b,"Forms")};Forms.prototype.onGenerate=function(){this.editor.addEditorStylesheet(Xinha.getPluginDir("Forms")+"/forms.css")};Forms.prototype.buttonPress=function(y,s,v){function z(a,b){this.text=a;this.value=b}var q=new Object();var i=s;var x=y._getSelection();var t=y._createRange(x);if(s=="form"){var p=y.getParentElement();var A=null;while(p&&(p.nodeType==1)&&(p.tagName.toLowerCase()!="body")){if(p.tagName.toLowerCase()=="form"){A=p;break}else{p=p.parentNode}}if(A){q.f_name=A.name;q.f_action=A.action;q.f_method=A.method;q.f_enctype=A.enctype;q.f_target=A.target}else{q.f_name="";q.f_action="";q.f_method="";q.f_enctype="";q.f_target=""}y._popupDialog("plugin://Forms/form",function(a){if(a){if(A){A.name=a.f_name;A.setAttribute("action",a.f_action);A.setAttribute("method",a.f_method);A.setAttribute("enctype",a.f_enctype);A.setAttribute("target",a.f_target)}else{A='<form name="'+a.f_name+'"';if(a.f_action!=""){A+=' action="'+a.f_action+'"'}if(a.f_method!=""){A+=' method="'+a.f_method+'"'}if(a.f_enctype!=""){A+=' enctype="'+a.f_enctype+'"'}if(a.f_target!=""){A+=' target="'+a.f_target+'"'}A+=">";y.surroundHTML(A,"&nbsp;</form>")}}},q)}else{var r="";if(typeof v=="undefined"){v=y.getParentElement();var w=v.tagName.toLowerCase();if(v&&(w=="legend")){v=v.parentElement;w=v.tagName.toLowerCase()}if(v&&!(w=="textarea"||w=="select"||w=="input"||w=="label"||w=="fieldset")){v=null}}if(v){i=v.tagName.toLowerCase();q.f_name=v.name;r=v.tagName;if(i=="input"){q.f_type=v.type;i=v.type}switch(i){case"textarea":q.f_cols=v.cols;q.f_rows=v.rows;q.f_text=v.innerHTML;q.f_wrap=v.getAttribute("wrap");q.f_readOnly=v.getAttribute("readOnly");q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"select":q.f_size=parseInt(v.size);q.f_multiple=v.getAttribute("multiple");q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");var B=new Array();for(var u=0;u<=v.options.length-1;u++){B[u]=new z(v.options[u].text,v.options[u].value)}q.f_options=B;break;case"text":case"password":q.f_value=v.value;q.f_size=v.size;q.f_maxLength=v.maxLength;q.f_readOnly=v.getAttribute("readOnly");q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"hidden":q.f_value=v.value;break;case"submit":case"reset":q.f_value=v.value;q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"checkbox":case"radio":q.f_value=v.value;q.f_checked=v.checked;q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"button":q.f_value=v.value;q.f_onclick=v.getAttribute("onclick");q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"image":q.f_value=v.value;q.f_src=v.src;q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"file":q.f_disabled=v.getAttribute("disabled");q.f_tabindex=v.getAttribute("tabindex");q.f_accesskey=v.getAttribute("accesskey");break;case"label":q.f_text=v.innerHTML;q.f_for=v.getAttribute("for");q.f_accesskey=v.getAttribute("accesskey");break;case"fieldset":if(v.firstChild.tagName.toLowerCase()=="legend"){q.f_text=v.firstChild.innerHTML}else{q.f_text=""}break}}else{q.f_name="";switch(s){case"textarea":case"select":case"label":case"fieldset":r=s;break;default:r="input";q.f_type=s;break}q.f_options="";q.f_cols="20";q.f_rows="4";q.f_multiple="false";q.f_value="";q.f_size="";q.f_maxLength="";q.f_checked="";q.f_src="";q.f_onclick="";q.f_wrap="";q.f_readOnly="false";q.f_disabled="false";q.f_tabindex="";q.f_accesskey="";q.f_for="";q.f_text="";q.f_legend=""}y._popupDialog("plugin://Forms/"+r+".html",function(a){if(a){if(a.f_cols){if(isNaN(parseInt(a.f_cols,10))||parseInt(a.f_cols,10)<=0){a.f_cols=""}}if(a.f_rows){if(isNaN(parseInt(a.f_rows,10))||parseInt(a.f_rows,10)<=0){a.f_rows=""}}if(a.f_size){if(isNaN(parseInt(a.f_size,10))||parseInt(a.f_size,10)<=0){a.f_size=""}}if(a.f_maxlength){if(isNaN(parseInt(a.f_maxLength,10))||parseInt(a.f_maxLength,10)<=0){a.f_maxLength=""}}if(v){for(field in a){if((field=="f_text")||(field=="f_options")||(field=="f_onclick")||(field=="f_checked")){continue}if(a[field]!=""){v.setAttribute(field.substring(2,20),a[field])}else{v.removeAttribute(field.substring(2,20))}}if(i=="textarea"){v.innerHTML=a.f_text}else{if(i=="select"){v.options.length=0;var b=a.f_options;for(u=0;u<=b.length-1;u++){v.options[u]=new Option(b[u].text,b[u].value)}}else{if(i=="label"){v.innerHTML=a.f_text}else{if(i=="fieldset"){if(q.f_text!=""){if(v.firstChild.tagName.toLowerCase()=="legend"){v.firstChild.innerHTML=a.f_text}}else{}}else{if((i=="checkbox")||(i=="radio")){if(a.f_checked!=""){v.checked=true}else{v.checked=false}}else{if(a.f_onclick){v.onclick="";if(a.f_onclick!=""){v.onclick=a.f_onclick}}}}}}}}else{var c="";for(field in a){if(!a[field]){continue}if((a[field]=="")||(field=="f_text")||(field=="f_options")){continue}c+=" "+field.substring(2,20)+'="'+a[field]+'"'}if(i=="textarea"){c="<textarea"+c+">"+a.f_text+"</textarea>"}else{if(i=="select"){c="<select"+c+">";var b=a.f_options;for(u=0;u<=b.length-1;u++){c+='<option value="'+b[u].value+'">'+b[u].text+"</option>"}c+="</select>"}else{if(i=="label"){c="<label"+c+">"+a.f_text+"</label>"}else{if(i=="fieldset"){c="<fieldset"+c+">";if(a.f_legend!=""){c+="<legend>"+a.f_text+"</legend>"}c+="</fieldset>"}else{c='<input type="'+i+'"'+c+">"}}}}y.insertHTML(c)}}},q)}};