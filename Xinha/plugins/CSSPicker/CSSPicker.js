/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function CSSPicker(e,d){this.editor=e;var f=this}CSSPicker._pluginInfo={name:"CSSPicker",version:"2008-12-01",author:"Justin Rovang"};CSSPicker.prototype.onGenerateOnce=function(){var d=this.editor;var c=this;d._cssPicker=d.addPanel("right");this.main=document.createElement("div");d._cssPicker.style.backgroundColor="#dee5f8";d._cssPicker.appendChild(this.main);Xinha.freeLater(this,"main");d.showPanel(d._cssPicker)};CSSPicker.prototype.onUpdateToolbar=function(){if(this.editor._cssPicker){if(this._timeoutID){window.clearTimeout(this._timeoutID)}var b=this.editor;this._timeoutID=window.setTimeout(function(){b._gen()},250)}};Xinha.prototype.listStyles=function(l){var h=this;var k=this.getSelection();var i;if(Xinha.is_ie){i=this.saveSelection();k=this.createRange(k).text}var j=document.createElement("div");j.className="CSSPickerOption";var d=h.getStyleInfo(l);if(d){Xinha._addClass(j,"CSSPickerOptionActive")}j.align="center";j.innerHTML='<div class="'+l+'">'+CSSPicker.cssList[l].name+"</div>";j.onclick=function(){h.wrapStyle(l,k,i,CSSPicker.cssList[l].wrapper);return false};Xinha._addEvent(j,"mouseover",function(a){Xinha._addClass(j,"CSSPickerOptionOver")});Xinha._addEvent(j,"mouseout",function(a){Xinha._removeClass(j,"CSSPickerOptionOver")});return j};Xinha.prototype._gen=function(){this.plugins.CSSPicker.instance.main.innerHTML="";for(var b in CSSPicker.cssList){this.plugins.CSSPicker.instance.main.appendChild(this.listStyles(b))}return true};Xinha.prototype.wrapStyle=function(m,l,j,k){if(!k){k="div"}k=k.toLowerCase();var i="";if(k=="div"){i="<br/>"}var h=this;this.focusEditor();if(Xinha.is_ie){this.restoreSelection(j)}var n=h.getStyleInfo(m);if(!n){if(l==""){l="&nbsp;"}this.insertHTML("<"+k+" class='"+m+"'>"+l+"</"+k+">"+i)}else{Xinha._removeClass(n,m)}return true};Xinha.prototype.getStyleInfo=function(l){var k=this;var j=this.getAllAncestors();var a,i;if(j){j.pop()}if(j.length>0){for(var h in j){a=j[h];if(a.className){i=a.className.trim()+" ";if(i.toLowerCase().match(l.toLowerCase()+" ")){return a}}}}return false};