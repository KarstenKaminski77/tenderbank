/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function i18n(b){return Xinha._lc(b,"ExtendedFileManager")}function changeDir(e){showMessage("Loading");var f=window.top.document.getElementById("manager_mode").value;var h=window.top.document.getElementById("viewtype");var g=h.options[h.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+f+"&dir="+e+"&viewtype="+g;document.cookie="EFMStartDir"+f+"="+e}function newFolder(g,j){var f=window.top.document.getElementById("manager_mode").value;var i=window.top.document.getElementById("viewtype");var h=i.options[i.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+f+"&dir="+g+"&newDir="+j+"&viewtype="+h}function renameFile(e){var g=e.replace(/.*%2F/,"").replace(/\..*$/,"");var f=function(c){if(c==""||c==null||c==g){alert(i18n("Cancelled rename."));return false}var d=window.top.document.getElementById("manager_mode").value;var b=window.top.document.getElementById("dirPath");var j=b.options[b.selectedIndex].value;b=window.top.document.getElementById("viewtype");var a=b.options[b.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+d+"&dir="+j+"&rename="+e+"&renameTo="+c+"&viewtype="+a};if(Xinha.ie_version>6){popupPrompt(i18n("Please enter new name for this file..."),g,f,i18n("Rename"))}else{var h=prompt(i18n("Please enter new name for this file..."),g);f(h)}}function renameDir(f){function e(c){if(c==""||c==null||c==f){alert(i18n("Cancelled rename."));return false}var i=window.top.document.getElementById("manager_mode").value;var b=window.top.document.getElementById("dirPath");var j=b.options[b.selectedIndex].value;b=window.top.document.getElementById("viewtype");var a=b.options[b.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+i+"&dir="+j+"&rename="+f+"&renameTo="+c+"&viewtype="+a}if(Xinha.ie_version>6){popupPrompt(i18n("Please enter new name for this folder..."),f,e,i18n("Rename"))}else{var d=prompt(i18n("Please enter new name for this folder..."),f);e(d)}}function copyFile(e,h){var g=window.top.document.getElementById("dirPath");var f=g.options[g.selectedIndex].value;window.top.pasteButton({dir:f,file:e,action:h+"File"})}function copyDir(e,h){var g=window.top.document.getElementById("dirPath");var f=g.options[g.selectedIndex].value;window.top.pasteButton({dir:f,file:e,action:h+"Dir"})}function paste(i){var j=window.top.document.getElementById("manager_mode").value;var h=window.top.document.getElementById("dirPath");var f=h.options[h.selectedIndex].value;h=window.top.document.getElementById("viewtype");var g=h.options[h.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+j+"&dir="+f+"&paste="+i.action+"&srcdir="+i.dir+"&file="+i.file+"&viewtype="+g}function updateDir(j){var f=window.top.document.getElementById("manager_mode").value;document.cookie="EFMStartDir"+f+"="+j;var i=window.top.document.getElementById("dirPath");if(i){for(var g=0;g<i.length;g++){var h=i.options[g].text;if(h==j){i.selectedIndex=g;showMessage("Loading");break}}}}function emptyProperties(){toggleImageProperties(false);var b=window.top.document;b.getElementById("f_url").value="";b.getElementById("f_alt").value="";b.getElementById("f_title").value="";b.getElementById("f_width").value="";b.getElementById("f_margin").value="";b.getElementById("f_height").value="";b.getElementById("f_padding").value="";b.getElementById("f_border").value="";b.getElementById("f_borderColor").value="";b.getElementById("f_backgroundColor").value=""}function toggleImageProperties(c){var d=window.top.document;if(c==true){d.getElementById("f_width").value="";d.getElementById("f_margin").value="";d.getElementById("f_height").value="";d.getElementById("f_padding").value="";d.getElementById("f_border").value="";d.getElementById("f_borderColor").value="";d.getElementById("f_backgroundColor").value=""}d.getElementById("f_width").disabled=c;d.getElementById("f_margin").disabled=c;d.getElementById("f_height").disabled=c;d.getElementById("f_padding").disabled=c;d.getElementById("f_align").disabled=c;d.getElementById("f_border").disabled=c;d.getElementById("f_borderColor").value="";d.getElementById("f_backgroundColor").value="";d.getElementById("constrain_prop").disabled=c}function selectImage(i,k,j,g){var h=window.top.document;if(h.getElementById("manager_mode").value=="image"){var l=h.getElementById("f_url");l.value=i;l=h.getElementById("f_alt");l.value=k;l=h.getElementById("f_title");l.value=k;if(j==0&&g==0){toggleImageProperties(true)}else{toggleImageProperties(false);var l=h.getElementById("f_width");l.value=j;var l=h.getElementById("f_height");l.value=g;var l=h.getElementById("orginal_width");l.value=j;var l=h.getElementById("orginal_height");l.value=g;update_selected()}}else{if(h.getElementById("manager_mode").value=="link"){var l=h.getElementById("f_href");l.value=i;var l=h.getElementById("f_title");l.value=k}}return false}var _current_selected=null;function update_selected(){var l=window.top.document;if(_current_selected){_current_selected.className=_current_selected.className.replace(/(^| )active( |$)/,"$1$2");_current_selected=null}var g=l.getElementById("f_url").value;var j=l.getElementById("dirPath");var k=j.options[j.selectedIndex].text;var h=new RegExp("^("+k.replace(/([\/\^$*+?.()|{}[\]])/g,"\\$1")+")([^/]*)$");if(h.test(g)){var i=document.getElementById("holder_"+asc2hex(RegExp.$2));if(i){_current_selected=i;i.className+=" active"}}showPreview(g)}function asc2hex(e){var f="";for(var h=0;h<e.length;h++){var g=(e.charCodeAt(h)).toString(16);if(g.length==1){g="0"+g}f+=g}return f}function showMessage(g){var e=window.top.document;var f=e.getElementById("message");var h=e.getElementById("messages");if(f&&h){if(f.firstChild){f.removeChild(f.firstChild)}f.appendChild(e.createTextNode(i18n(g)));h.style.display="block"}}function updateDiskMesg(d){var f=window.top.document;var e=f.getElementById("diskmesg");if(e){if(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(f.createTextNode(d))}}function addEvent(e,h,g){if(e.addEventListener){e.addEventListener(h,g,true);return true}else{if(e.attachEvent){var f=e.attachEvent("on"+h,g);return f}else{return false}}}function confirmDeleteFile(b){if(confirm(i18n('Delete file "$file='+b+'$"?'))){return true}return false}function confirmDeleteDir(d,c){if(confirm(i18n('Delete folder "$dir='+d+'$"?'))){return true}return false}function showPreview(b){window.parent.document.getElementById("f_preview").src=b?window.parent._backend_url+"__function=thumbs&img="+b:window.parent.opener.Xinha.getPluginDir("ExtendedFileManager")+"/img/1x1_transparent.gif"}addEvent(window,"load",init);