/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
(function(){var c=window.PSFixed=function c(a){this.editor=a};c._pluginInfo={name:"PSFixed",version:"2.0",developer:"Douglas Mayle",developer_url:"http://xinha.org",license:"BSD"};c.prototype.onGenerateOnce=function(){this._registerBackend()};c.prototype._registerBackend=function(a){var g=this.editor;var h=this;if(!a){a=0}var b=10000;if(a>b){return}if(!g.plugins.PersistentStorage||!g.plugins.PersistentStorage.instance||!g.plugins.PersistentStorage.instance.ready){window.setTimeout(function(){h._registerBackend(a?a*2:50)},a?a:50);return}g.plugins.PersistentStorage.instance.registerBackend("PSFixed",this)};c.prototype.loadData=function(a){if(!this.config.$type){this.config.$type="folder"}a(this.config)};var d=function d(h,a,g){if(typeof g=="undefined"){g="/";a("/","",h)}for(var b in h){a(g,b,h[b]);if(h[b].$type=="folder"){d(h[b],a,g+b+"/")}}};c.prototype.getFilters=function(a){var b=[];d(a,function(i,k,j){if(j.$type!="folder"){return}var l=k.length?i+k+"/":i;b.push({value:l,display:l})});return b};c.prototype.getMetadata=function(h,a){var i=this.editor;var j=this;var b=[];d(h,function(e,g,f){if(!f.$type||!g){return}if(e!=a){return}if(f.$type=="folder"){b.push({URL:j.editor.imgURL("folder.gif","PersistentStorage"),name:g,key:e+g,$type:f.$type})}else{b.push({URL:f.URL,name:g,key:e+g,$type:f.$type})}});return b}})();