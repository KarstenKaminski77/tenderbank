/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function GetHtmlImplementation(b){this.editor=b}GetHtmlImplementation._pluginInfo={name:"GetHtmlImplementation TransformInnerHTML",version:"1.0",developer:"Nelson Bright",developer_url:"http://www.brightworkweb.com/",sponsor:"",sponsor_url:"",license:"htmlArea"};Xinha.RegExpCache=[/<\s*\/?([^\s\/>]+)[\s*\/>]/gi,/(\s+)_moz[^=>]*=[^\s>]*/gi,/\s*=\s*(([^'"][^>\s]*)([>\s])|"([^"]+)"|'([^']+)')/g,/\/>/g,/<(br|hr|img|input|link|meta|param|embed|area)((\s*\S*="[^"]*")*)>/g,/(<\w+\s+(\w*="[^"]*"\s+)*)(checked|compact|declare|defer|disabled|ismap|multiple|no(href|resize|shade|wrap)|readonly|selected)([\s>])/gi,/(="[^']*)'([^'"]*")/,/&(?=(?!(#[0-9]{2,5};|[a-zA-Z0-9]{2,6};|#x[0-9a-fA-F]{2,4};))[^<]*>)/g,/<\s+/g,/\s+(\/)?>/g,/\s{2,}/g,/\s+([^=\s]+)((="[^"]+")|([\s>]))/g,/\s+contenteditable(=[^>\s\/]*)?/gi,/((href|src)=")([^\s]*)"/g,/<\/?(div|p|h[1-6]|table|tr|td|th|ul|ol|li|dl|dt|dd|blockquote|object|br|hr|img|embed|param|pre|script|html|head|body|meta|link|title|area|input|form|textarea|select|option)[^>]*>/g,/<\/(div|p|h[1-6]|table|tr|ul|ol|dl|blockquote|html|head|body|script|form|select)( [^>]*)?>/g,/<(div|p|h[1-6]|table|tr|ul|ol|dl|blockquote|object|html|head|body|script|form|select)( [^>]*)?>/g,/<(td|th|li|dt|dd|option|br|hr|embed|param|pre|meta|link|title|area|input|textarea)[^>]*>/g,/(^|<\/(pre|script)>)(\s|[^\s])*?(<(pre|script)[^>]*>|$)/g,/(<pre[^>]*>)([\s\S])*?(<\/pre>)/g,/(^|<!--[\s\S]*?-->)([\s\S]*?)(?=<!--[\s\S]*?-->|$)/g,/\S*=""/g,/<!--[\s\S]*?-->|<\?[\s\S]*?\?>|<\/?\w[^>]*>/g,/(^|<\/script>)[\s\S]*?(<script[^>]*>|$)/g];var testRE=new RegExp().compile(Xinha.RegExpCache[3]);if(typeof testRE!="undefined"){for(var i=0;i<Xinha.RegExpCache.length;i++){Xinha.RegExpCache[i]=new RegExp().compile(Xinha.RegExpCache[i])}}Xinha.prototype.cleanHTML=function(f){var e=Xinha.RegExpCache;f=f.replace(e[0],function(a){return a.toLowerCase()}).replace(e[1]," ").replace(e[12]," ").replace(e[2],'="$2$4$5"$3').replace(e[21]," ").replace(e[11],function(b,d,a){return" "+d.toLowerCase()+a}).replace(e[3],">").replace(e[9],"$1>").replace(e[5],'$1$3="$3"$5').replace(e[4],"<$1$2 />").replace(e[6],"$1$2").replace(e[7],"&amp;").replace(e[8],"<").replace(e[10]," ");if(Xinha.is_ie&&e[13].test(f)){f=f.replace(e[13],"$1"+Xinha._escapeDollars(this.stripBaseURL(RegExp.$3))+'"')}if(this.config.only7BitPrintablesInURLs){if(Xinha.is_ie){e[13].test(f)}if(e[13].test(f)){try{f=f.replace(e[13],"$1"+Xinha._escapeDollars(decodeURIComponent(RegExp.$3).replace(/([^!-~]+)/g,function(a){return escape(a)}))+'"')}catch(c){f=f.replace(e[13],Xinha._escapeDollars("$1"+RegExp.$3.replace(/([^!-~]+)/g,function(a){return escape(a)})+'"'))}}}return f};Xinha.indent=function(c,e){Xinha.__nindent=0;Xinha.__sindent="";Xinha.__sindentChar=(typeof e=="undefined")?"  ":e;var f=Xinha.RegExpCache;if(Xinha.is_gecko){c=c.replace(f[19],function(a){return a.replace(/<br \/>/g,"\n")})}c=c.replace(f[18],function(a){a=a.replace(f[20],function(b,d,h){string=h.replace(/[\n\r]/gi," ").replace(/\s+/gi," ").replace(f[14],function(m){if(m.match(f[16])){var n="\n"+Xinha.__sindent+m;Xinha.__sindent+=Xinha.__sindentChar;++Xinha.__nindent;return n}else{if(m.match(f[15])){--Xinha.__nindent;Xinha.__sindent="";for(var g=Xinha.__nindent;g>0;--g){Xinha.__sindent+=Xinha.__sindentChar}return"\n"+Xinha.__sindent+m}else{if(m.match(f[17])){return"\n"+Xinha.__sindent+m}}}return m});return d+string});return a});c=c.replace(/^\s*/,"").replace(/ +\n/g,"\n").replace(/[\r\n]+(\s+)<\/script>/g,"\n$1<\/script>");return c};Xinha.getHTML=function(c,r,u){var s="";var q=Xinha.RegExpCache;if(c.nodeType==11){var v=document.createElement("div");var w=c.insertBefore(v,c.firstChild);for(j=w.nextSibling;j;j=j.nextSibling){w.appendChild(j.cloneNode(true))}s+=w.innerHTML.replace(q[23],function(b){b=b.replace(q[22],function(d){if(/^<[!\?]/.test(d)){return d}else{return u.cleanHTML(d)}});return b})}else{var t=(c.nodeType==1)?c.tagName.toLowerCase():"";if(r){s+="<"+t;var y=c.attributes;for(i=0;i<y.length;++i){var a=y.item(i);if(!a.specified){continue}var x=a.nodeName.toLowerCase();var z=a.nodeValue;s+=" "+x+'="'+z+'"'}s+=">"}if(t=="html"){innerhtml=u._doc.documentElement.innerHTML}else{innerhtml=c.innerHTML}s+=innerhtml.replace(q[23],function(b){b=b.replace(q[22],function(d){if(/^<[!\?]/.test(d)){return d}else{if(!(u.config.htmlRemoveTags&&u.config.htmlRemoveTags.test(d.replace(/<([^\s>\/]+)/,"$1")))){return u.cleanHTML(d)}else{return""}}});return b});if(Xinha.is_ie){s=s.replace(/<(li|dd|dt)( [^>]*)?>/g,"</$1><$1$2>").replace(/(<[uod]l[^>]*>[\s\S]*?)<\/(li|dd|dt)>/g,"$1").replace(/\s*<\/(li|dd|dt)>(\s*<\/(li|dd|dt)>)+/g,"</$1>").replace(/(<dt[\s>][\s\S]*?)(<\/d[dt]>)+/g,"$1</dt>")}if(Xinha.is_gecko){s=s.replace(/<br \/>\n$/,"")}s=s.replace(/\s*(<\/(li|dd|dt)>)/g,"$1");if(r){s+="</"+t+">"}s=Xinha.indent(s)}return s};Xinha._escapeDollars=function(b){return b.replace(/\$/g,"$$$$")};