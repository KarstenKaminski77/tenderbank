/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function BackgroundImage(a){this.editor=a;var b=a.config;var c=this;b.registerButton({id:"bgImage",tooltip:Xinha._lc("Set page background image","BackgroundImage"),image:a.imgURL("ed_bgimage.gif","BackgroundImage"),textMode:false,action:function(d){c.show()}});b.addToolbarElement("bgImage","inserthorizontalrule",1)}BackgroundImage._pluginInfo={name:"BackgroundImage",version:"1.0",developer:"Udo Schmal",developer_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath NeueMedien",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de.de/",license:"htmlArea"};BackgroundImage.prototype.onGenerateOnce=function(c){var b=BackgroundImage;if(b.loading){return}var a={blufur:"",palecnvs:"",ppplcnvs:"",ylwsand:""};b.loading=true;b.methodsReady=true;Xinha._getback(Xinha.getPluginDir("BackgroundImage")+"/dialog.html",function(d){b.html=d.replace(/<template>(.*?)<\/template>/ig,function(h,g){var e="";for(bg in a){var f=Xinha.getPluginDir("BackgroundImage")+"/backgrounds/thumbnails/"+bg+".jpg";var i=Xinha.getPluginDir("BackgroundImage")+"/backgrounds/"+bg+".jpg";e+=g.replace(/%thumbnail%/,f).replace(/%image%/,i)}return e});b.dialogReady=true})};BackgroundImage.prototype.onUpdateToolbar=function(a){if(!(BackgroundImage.dialogReady&&BackgroundImage.methodsReady)){this.editor._toolbarObjects.BackgroundImage.state("enabled",false)}else{this.onUpdateToolbar=null}};BackgroundImage.prototype.prepareDialog=function(c){var b=this;var c=this.editor;var a=this.dialog=new Xinha.Dialog(c,BackgroundImage.html,"Xinha",{width:400});a.getElementById("set").onclick=function(){b.apply()};a.getElementById("delete").onclick=function(){b.deleteBg()};a.getElementById("cancel").onclick=function(){b.dialog.hide()};this.dialogReady=true};BackgroundImage.prototype.show=function(b){if(!this.dialog){this.prepareDialog()}var b=this.editor;if(b._doc.body.background.split(".").pop() in {jpg:"",gif:"",png:"",jpeg:"",tiff:""}){var c=b._doc.body.background}else{var c=""}var a={background:c};this.dialog.show(a)};BackgroundImage.prototype.deleteBg=function(){var a=this.editor;this.dialog.hide();if(Xinha.is_ie){a.focusEditor()}a._doc.body.background=""};BackgroundImage.prototype.apply=function(){var b=this.editor;var c=b._doc;var a=this.dialog.hide();if(Xinha.is_ie){b.focusEditor()}c.body.background=a.background};